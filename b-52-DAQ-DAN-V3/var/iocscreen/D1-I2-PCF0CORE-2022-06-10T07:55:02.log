#!../../bin/linux-x86_64/D1-I2
#+======================================================================
# $HeadURL: https://svnpub.codac.iter.org/codac/iter/codac/dev/units/m-epics-iter-templates/branches/codac-core-6.3/templates/genericBoot/ioc/st.cmd $
# $Id: st.cmd 116150 2021-01-04 09:45:04Z kimh19 $
#
# Project       : CODAC Core System
#
# Description   : ITER ioc template EPICS start up file
#
# Author(s)     : This file was generated by CODAC development toolkit
#
# Copyright (c) : 2010-2021 ITER Organization,
#                 CS 90 046
#                 13067 St. Paul-lez-Durance Cedex
#                 France
#
# This file is part of ITER CODAC software.
# For the terms and conditions of redistribution or use of this software
# refer to the file ITER-LICENSE.TXT located in the top level directory
# of the distribution package.
#
< envPaths
epicsEnvSet("IOC","iocD1-I2-PCF0CORE")
epicsEnvSet("TOP","/home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/target/main/epics")
epicsEnvSet("EPICS_BASE","/opt/codac-6.3/epics")
< envSystem
############################################################################
## CODAC specific environment variables
############################################################################
epicsEnvSet("AUTOSAVE_SYSM_PV_PREFIX","D1-I2-SYSM:F0CORE-")
epicsEnvSet("IOCSH_PS1","iocD1-I2-PCF0CORE> ")
epicsEnvSet("STREAM_PROTOCOL_PATH","/home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/target/main/epics/db:/opt/codac-6.3/epics/db")
< envUser
############################################################################
## User provided environment variables
############################################################################
#epicsEnvSet("EPICS_CA_SERVER_PORT", "5064")
#epicsEnvSet("EPICS_CA_ADDR_LIST", "")
#epicsEnvSet("EPICS_CA_AUTO_ADDR_LIST", "YES")
epicsEnvSet("EPICS_DB_INCLUDE_PATH",".:/home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/target/main/epics/../db:/opt/codac-6.3/epics/db")
cd "/home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/target/main/epics"
############################################################################
## Register all support components
############################################################################
dbLoadDatabase "dbd/D1-I2.dbd"
D1_I2_registerRecordDeviceDriver pdbbase
< "/home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/target/main/epics/iocBoot/iocD1-I2-PCF0CORE/sddPreDriverConf.cmd"
#======================================================================
# PLC(s) driver configuration commands
#======================================================================
# level=-1:  no output
# level=0:   errors only
# level=1:   startup messages
# level=2: + output record processing
# level=3: + input record processing
# level=4: + driver calls
# level=5: + io printout
# be careful using level>1 since many messages may introduce delays
# var s7plcDebug 2
# s7plcConfigure name,IPaddr,port,inSize,outSize,bigEndian,recvTimeout,sendIntervall, configversion
# connects to PLC <name> on address <IPaddr> port <port>
# <inSize>        : size of data block PLC -> IOC [bytes]
# <outSize>       : size of data block IOC -> PLC [bytes]
# <bigEndian>=1   : motorola format data (MSB first)
# <bigEndian>=0   : intel format data (LSB first)
# <recvInterval>  : receive buffer interval [ms] (Default : 50ms)
# <sendIntervall> : time to wait before sending new data to PLC [ms]
# <configversion> : database configuration version
# s7plcConfigureCmd name,IPaddr,port,outSize,bigEndian,sendIntervall
# connects to PLC <name> on address <IPaddr> port <port>
# <outSize>       : size of data block IOC -> PLC [bytes]
# <bigEndian>=1   : motorola format data (MSB first)
# <bigEndian>=0   : intel format data (LSB first)
# <sendIntervall> : time to wait before sending new data to PLC [ms]
#============================================================================
# s7plc asyn driver configuration commands
#============================================================================
#============================================================================
# NI-6259 DAQ I/O Module driver configuration commands
#============================================================================
# Reference: ITER_D_3DEY52 v1.3 - NI PXI-6259 EPICS Driver User’s Guide
# For analogue input, analogue output, waveform, initialize using below function
# pxi6259_ai_init(uint8 cardnumber, uint32 range, uint32 clk_source, uint32 clk_edge);
# Example: pxi6259_ai_init(0, 1, 0, 0)
# For binary input, binary output, multi-bit binary input, multi bit binary output, initialize using below function
# pxi6259init(uint8 cardnumber, uint32 portmask0, uint8 portmask1, uint8 portmask2);
# Example: pxi6259_bio_init(0, 0xFF000000, 0xFF, 0xFF)
#============================================================================
# NI-6682 Timing and Synchronization I/O Module driver configuration commands
#============================================================================
# Reference ITER_D_33Q5TX v1.7 - NI Sync EPICS Driver User’s Guide 
# nisyncDrvInit(string port, char* type, int cardNumber);
# Example: nisyncDrvInit("S0", "PXI-6682", "0");
# Example: nisyncDrvInit("S0", "PXI-6683H", "0");
# nisyncTimeInit(int cardID, char* type, int cardNumber);
# Example: nisyncTimeInit("0", "PXI-6682", "0")
# Example: nisyncTimeInit("0", "PXI-6683H", "0")
#============================================================================================
# NI-6368 X Series - Multifunction Data Acquisition I/O Module driver configuration commands
#============================================================================================
# Reference ITER_D_3P4N3R v1.2 - NI X Series EPICS Driver User’s Guide 
# nixseriesInit(char *portName, char *nix6368Card);
# Example: nixseriesInit("ni6368_0", "/dev/ni6368.0");
#============================================================================================
# PXIe-6363 X Series - PXI Multifunction I/O Module driver configuration commands
#============================================================================================
# Reference ITER_D_3LTMR6 v2.0 - NI X-Series Linux Device Driver User's Guide 
# nixseriesInit(char *portName, char *nix6363Card);
# Example: nixseriesInit("ni6363_0", "/dev/ni6363.0");
#============================================================================
# NI-6528 DAQ I/O Module driver configuration commands
#============================================================================
# Reference ITER_D_433VEW - NI PXI-6528 EPICS Driver User's Manual
# ni6528_init(char *portName, char *ni6528Card); 
# Example: pxi6528_init("ni6528_0", "/dev/ni6528.0")
# asynSetTraceMask("<port name>",0,255)
# Example: asynSetTraceMask("pxi6528_0",0,255)
# pxi6528_reset(char *portName)
# Example: pxi6528_reset("pxi6528_0")
< "/home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/target/main/epics/iocBoot/iocD1-I2-PCF0CORE/userPreDriverConf.cmd"
############################################################################
## User provided PLC or fast controller driver pre configuration
############################################################################
# Enable parallel callback threads to improve 'I/O Intr' record scanning
#    see https://bugzilla.iter.org/codac/show_bug.cgi?id=10413
ndsLoadDriver /home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/src/main/c++/nds3/target/lib/libNdsDaq.so
ndsCreateDevice(Device,B-0,"INIT=YES")
callbackParallelThreads
ndsLoadDriver /home/codac-dev/test_HMI-project/b-52-DAQ-DAN-V3/src/main/c++/nds3-dan/target/lib/libnds-dan-device-Copy.so
ndsCreateDevice(DeviceNDSDANCopy,DAN-0, "INIT=YES")
